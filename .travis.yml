dist: trusty
language: java
jdk: oraclejdk8

services:
  - mysql
before_install:
  - mysql -e 'CREATE DATABASE petclinic;'

addons:
  sonarcloud:
    organization: "gii-is-dp1" # the key of the org you chose at step #3
    token:
      secure: "ulamlaT25QFhSuK6zhQMNxlpGdz7CjLqFQtxslWfaAIlflnvoFMnhGIyrRmErVWlCdXb9qGKFCycg4D2XPJ5Y4C+PPAbjdwtlswrgRV0dhCPX69jgP3a4vZ68M00mY3fuPy2LnE9AIhnC+dADiTXvS1aqHyAKCWYDQnK5YdEChRCNJMCfJWwdI+Wy4mOVMzgEDdxQ5JxYUDL9Kj8JtTL0Q2kXgViutXkXFJxx/lodvNZFIqlLVTni/Putv4SJnBKs68gFGPCWeqUtJ3QYYMHbpLy/IxXq0JBHxWYfLHYUOu4PBZRR+GEz9t6OnppaI4HQY+GZX4UehWcpvSOz9lQ9UfLMlviVdBXjcBHwf9lYTjbabRgh2oF+2a+P9J5CwzjsASEXn1gcGJ/HC/Sb6vFKjXpUooqM4D7DJcuKCZh8uXw2Al6RmZAPkeOqLs4lFlenqf/A0UN3BfQ5AwBhno+MxrCOfOluh2JtAtivwm+BfKw2n0x3EnF9FJOeLPhBZ/Nqn2vaTbgvRXLq28bRMEY8orHrzAcXEXR2utaDpPlZnDwmRz9XBP1ghOLxgVu+l9p6t57ojzE9pbVmnMYWTpuuCWPsKHjT4Pqhd2i2MseIbyiBFk9dY97wSDpcsYY/vjrAXZEHi8FZPQ3TaJdGugjASKQolSDzxXBzFuOlOjiugI="
script:
  - mvn test -Dspring-boot.run.profiles=mysql-travis
  - mvn clean org.jacoco:jacoco-maven-plugin:prepare-agent install sonar:sonar -Dsonar.projectKey=gii-is-DP1_dp1-2020-g1-12
